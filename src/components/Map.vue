<template>
  <div id="mapid"></div>
</template>

<script>
import "leaflet/dist/leaflet.css";
import L from "leaflet";
// import restaurant from "@/json/restaurant.json";

delete L.Icon.Default.prototype._getIconUrl;
L.Icon.Default.mergeOptions({
  iconUrl: require("leaflet/dist/images/marker-icon.png"),
  iconRetinaUrl: require("leaflet/dist/images/marker-icon-2x.png"),
  shadowUrl: require("leaflet/dist/images/marker-shadow.png"),
});

export default {
  name: "Map",
  mounted() {
    // マップオブジェクト生成
    // データソースはOpenStreetMap
    const mymap = L.map("mapid").setView(
      [34.510908722824276, 135.4812200449548],
      15
    );

    // mymap.map("map_container", {
    //  preferCanvas: true,
    // });

    L.tileLayer("http://{s}.tile.osm.org/{z}/{x}/{y}.png", {
      maxZoom: 30,
      attribution:
        'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, ',
    }).addTo(mymap);
    // 初期地点
    const marker = L.marker([34.57886298585393, 135.47416382128682]).addTo(
      mymap
    );
    marker
      .bindPopup("<p>西高野街道と竹内街道</p><p>スタート地点です</p>")
      .openPopup();

    const kishuMarker = L.marker([34.59571613823718, 135.48537114791756]).addTo(
      mymap
    );
    kishuMarker.bindPopup("<p>紀州街道</p><p>スタート地点です</p>").openPopup();

    // const marker2 = L.marker([34.57087119949882, 135.48662276687392]).addTo(
    //   mymap
    // );
    // const restaurantNum = restaurant.elements.length;
    // setInterval(() => {
    //   for (let i = 0; i < 50; i++) {
    //     const mkr = L.marker([
    //       restaurant.elements[i].lat,
    //       restaurant.elements[i].lon,
    //     ]).addTo(mymap);

    //     mkr
    //       .bindPopup(
    //         `<p>${restaurant.elements[i].tags.name}</p><p>レストラン</p>`
    //       )
    //       .closePopup();
    //   }
    // }, 5000);

    var popup = L.popup();
    function onMarker2Click(e) {
      popup
        .setLatLng(e.latlng)
        .setContent(
          "<p>popup2</p><p>clickで表示されます。</p>" + e.latlng.toString()
        )
        .openOn(mymap);
    }
    mymap.on("click", onMarker2Click);

    console.log(window.outerHeight);
    document.getElementById("mapid").style.height = (window.outerHeight - 90) + "px";

    // takeuchi
    L.polyline(
      [
        [34.57886298585393, 135.47416382128682],
        [34.57492712710861, 135.4803597774887],
        [34.57469438501767, 135.4807730958926],
        [34.57410344659054, 135.483954516113],
        [34.57327204352739, 135.4837586910305],
        [34.57236000999832, 135.48384436450408],
        [34.572207000190744, 135.4843114695726],
        [34.572117203421264, 135.48439244612177],
        [34.57173808182014, 135.48451441331886],
        [34.57164267346298, 135.48469431493479],
        [34.57157417473993, 135.4848976641904],
        [34.57142263991744, 135.48518359226685],
        [34.571303913758015, 135.48554834778483],
        [34.57121278022428, 135.485876065805],
        [34.571096791944726, 135.48622246952988],
        [34.57100565818576, 135.48641363836393],
        [34.57087119949882, 135.48662276687392],
        [34.570681868003966, 135.48686710448024],
        [34.570370753319544, 135.4871818245368],
        [34.56997287755336, 135.48759506387813],
        [34.56992700971232, 135.4878839427913],
        [34.56987580837541, 135.48814820869646],
        [34.56972433756658, 135.4884370876181],
        [34.5695854897627, 135.48875910791307],
        [34.569421218018, 135.48909980366503],
        [34.5693252148992, 135.48925007252268],
        [34.56891133352081, 135.48976176388314],
        [34.568754527408274, 135.48995607705277],
        [34.5685710532143, 135.4902656827013],
        [34.568364110904575, 135.49062192352784],
        [34.568201970178485, 135.49086934898006],
        [34.568128366718355, 135.49147431064787],
        [34.56805476319456, 135.49169453222612],
        [34.567936357386884, 135.4921725426284],
        [34.56762060774257, 135.49305083817623],
        [34.56634881057729, 135.49657933914798],
        [34.566098320890156, 135.49766005339438],
        [34.56569554096707, 135.4977564654278],
        [34.56575314536462, 135.49802720842698],
        [34.56550885977435, 135.49877984807992],
        [34.56537444905492, 135.49891068564753],
        [34.5653509804946, 135.49923195006755],
        [34.56532004465405, 135.49942885412221],
        [34.5651952344256, 135.49981359417362],
        [34.56489440899585, 135.50026310532394],
        [34.56451784229937, 135.50069966223856],
        [34.563297455786795, 135.50200544675388],
        [34.56304569549726, 135.50235909676857],
        [34.56271819263281, 135.50271922384104],
        [34.56224880516772, 135.50348870400595],
        [34.56212612391464, 135.50373872030036],
        [34.562006642867786, 135.5038915800069],
        [34.56170473911158, 135.50419989021646],
        [34.561612994285866, 135.5042633658581],
        [34.561454040804186, 135.50466494641128],
        [34.561396433428875, 135.5047128769901],
        [34.56121721022837, 135.50502895972593],
        [34.56104972152439, 135.50574921390174],
        [34.560966510452786, 135.50620390675945],
        [34.56080008806131, 135.50686068526113],
        [34.56059194438069, 135.50762373607822],
        [34.5602409656753, 135.50844681341405],
        [34.56025632102446, 135.5085720063981],
        [34.56027500127793, 135.5092423053498],
        [34.56017519148017, 135.50952865100487],
        [34.56003808990963, 135.5098136648498],
        [34.559720013402575, 135.51032375969191],
        [34.56002821858542, 135.51160232640208],
        [34.56004796122695, 135.51205248852946],
        [34.5601192540609, 135.5123574799481],
        [34.560149964802044, 135.51257323811947],
        [34.56011925406162, 135.51290753002374],
        [34.55988672951629, 135.51329376369804],
        [34.55974194975406, 135.5136320511231],
        [34.55957523334749, 135.51397832966833],
        [34.559484197276404, 135.51417544202624],
        [34.55945458311131, 135.5144018548698],
        [34.55949297184142, 135.51466555929647],
        [34.55946555132146, 135.51511971682385],
        [34.55942496893451, 135.51596543545887],
        [34.559463357678666, 135.5162038348647],
        [34.55974743383527, 135.51641692935664],
        [34.559884418665355, 135.5170499161695],
        [34.55983851178047, 135.5176816788125],
        [34.559721558411184, 135.51859481485036],
        [34.55957400018611, 135.5194601704696],
        [34.55947234880857, 135.51948140619183],
        [34.55930948774458, 135.52022332919998],
        [34.55923734784406, 135.5207276775284],
        [34.55920127787034, 135.52120946290532],
        [34.559132416966534, 135.5218744064666],
        [34.55909743997842, 135.52210269044684],
        [34.55933462739332, 135.52272250807653],
        [34.55951060471381, 135.52297202777584],
        [34.55969969794134, 135.5234179778768],
        [34.5599314185453, 135.52398470620145],
        [34.55996202310669, 135.52427537017198],
        [34.55995655800778, 135.52465363141832],
        [34.560017767095495, 135.52534246514261],
        [34.55998401691274, 135.5248738989997],
        [34.55982387251174, 135.5253164632962],
        [34.55973883018622, 135.52564771601055],
        [34.55967698116833, 135.52581669510562],
        [34.55967256337958, 135.52592532452385],
        [34.55989897475092, 135.52608759809922],
        [34.55993100362863, 135.52620025090715],
        [34.55992989918483, 135.52671389371193],
        [34.55994425695299, 135.52725569969917],
        [34.559842648076156, 135.52789540635519],
        [34.559957510276, 135.52830980753583],
        [34.559901183644115, 135.53017662426652],
        [34.55990228808732, 135.5307680512233],
        [34.55988682586753, 135.53131656273018],
        [34.55981061917122, 135.5322191257501],
        [34.559809552411025, 135.53246264771965],
        [34.5597129133825, 135.5330809378165],
        [34.55982502275024, 135.53346708122552],
        [34.55984334830537, 135.53412810626028],
        [34.55972117436379, 135.5346705898818],
        [34.55961933312787, 135.53523394528742],
        [34.55965101708129, 135.53548539416357],
        [34.56018398463609, 135.5363936331108],
        [34.56018964244739, 135.53665607428758],
        [34.56000406603595, 135.536903401051],
        [34.559734753185786, 135.53728263548024],
        [34.5597053324019, 135.53748599304126],
        [34.55971393798298, 135.53779986155413],
        [34.559772779534235, 135.53808428733208],
        [34.560129222656805, 135.53855420818263],
        [34.56018919547651, 135.53890321372657],
        [34.56011903858888, 135.5390900829168],
        [34.56002625035618, 135.53922199052394],
        [34.5597648585587, 135.53944458461106],
        [34.559694135528595, 135.5397695444975],
        [34.559697061113354, 135.54084785503156],
        [34.55970174700721, 135.54195882188486],
        [34.559699404060815, 135.5430726338363],
        [34.55971580468739, 135.5437113331688],
        [34.55969354669284, 135.54397876180954],
        [34.55971229026759, 135.54441262210437],
        [34.559726347947745, 135.54502856158285],
        [34.55970994732287, 135.54541690210903],
        [34.55975680624256, 135.54570851312687],
        [34.55977672127664, 135.54628177780592],
        [34.559789632725725, 135.54714110374348],
        [34.56018207498691, 135.5477001434021],
        [34.5603191364786, 135.5480202043804],
        [34.56070806186908, 135.5491539311439],
        [34.5607830352319, 135.54947683706717],
      ],
      {
        color: "#2FFF00",
        weight: 10,
        opacity: 0.7,
      }
    ).addTo(mymap);

    // kishu
    L.polyline(
      [
        [34.59571613823718, 135.48537114791756],
        [34.59549554364334, 135.4852894471326],
        [34.59553320617646, 135.48496918005563],
        [34.59544712036142, 135.4849136235219],
        [34.59522114467251, 135.48517179800228],
        [34.5943584538656, 135.48492119994452],
        [34.59291960829088, 135.4845007591369],
        [34.592367500996474, 135.4843606177156],
        [34.59157641552874, 135.48419044602804],
        [34.591447314042426, 135.48416375243244],
        [34.59021122599832, 135.48370996126565],
        [34.58789282456096, 135.48284909265178],
        [34.587728006811815, 135.4826322071094],
        [34.56985438485357, 135.46602878465612],
        [34.569697774037024, 135.46589865336563],
        [34.56955215318857, 135.4655749934893],
        [34.56956314345018, 135.46519460971714],
        [34.569445608081196, 135.4650168409037],
        [34.56846411007555, 135.46382656262844],
        [34.567897092130025, 135.46319648162432],
        [34.56702549460043, 135.46236763073074],
        [34.566940490341075, 135.46235202653773],
        [34.56647098852018, 135.4620999588417],
        [34.56609736201633, 135.46185749373535],
        [34.56409069884194, 135.46057421328794],
        [34.563515415480836, 135.46021171595746],
        [34.56330205389205, 135.46005402164332],
        [34.56304209728778, 135.45971072947646],
        [34.56274947588705, 135.45940447966353],
        [34.56248299092222, 135.45916905565056],
        [34.56189628531733, 135.45866029286955],
        [34.56132627652708, 135.45831553333073],
        [34.56097918646125, 135.45821148826053],
        [34.560605227968864, 135.45805277545026],
        [34.560333653171924, 135.4578746643982],
        [34.55995134371666, 135.45755626452578],
        [34.55981918606704, 135.4573164317774],
        [34.55967323150224, 135.4568737993817],
        [34.559331943703896, 135.45651316857976],
        [34.558402471959255, 135.45601145970005],
        [34.55818389936146, 135.45583687560054],
        [34.55801963213043, 135.4556251119428],
        [34.55765491430886, 135.45485010973078],
        [34.55749426428293, 135.4546251657691],
        [34.556940823861545, 135.45428278216897],
        [34.55654353671905, 135.45410352995466],
        [34.55532651459083, 135.45361103619433],
        [34.5548351266231, 135.45339296554997],
        [34.554506578616376, 135.4531785658338],
        [34.55424894976278, 135.45295274320756],
        [34.55346427977436, 135.45233257596075],
        [34.551187842921976, 135.4507243316821],
        [34.550468675210546, 135.45014029661104],
        [34.549650942056076, 135.44959716047958],
        [34.54945271433165, 135.4494680183608],
        [34.549194856421785, 135.44934474634934],
        [34.54850508259323, 135.44862468127286],
        [34.54790071997968, 135.448172683874],
        [34.54714002265535, 135.4475230599154],
        [34.54691375208419, 135.4473236288299],
        [34.54720783543784, 135.44664010642518],
        [34.54626823650044, 135.44627420376418],
        [34.54523811105005, 135.44578317018602],
        [34.54226190583757, 135.44351908602974],
        [34.54130126744846, 135.44299665978556],
        [34.538927650250656, 135.44167055587147],
        [34.53689495059495, 135.44068259569286],
        [34.536139504612805, 135.44034184091288],
        [34.5356534534484, 135.43997364279164],
      ],
      {
        color: "#ff2f00",
        weight: 10,
        opacity: 0.7,
      }
    ).addTo(mymap);

    // nishikouya
    L.polyline(
      [
        [34.57886298585393, 135.47416382128682],
        [34.57492712710861, 135.4803597774887],
        [34.57469438501767, 135.4807730958926],
        [34.57410344659054, 135.483954516113],
        [34.57327204352739, 135.4837586910305],
        [34.57236000999832, 135.48384436450408],
        [34.572207000190744, 135.4843114695726],
        [34.572117203421264, 135.48439244612177],
        [34.57173808182014, 135.48451441331886],
        [34.57164267346298, 135.48469431493479],
        [34.57157417473993, 135.4848976641904],
        [34.57142263991744, 135.48518359226685],
        [34.571303913758015, 135.48554834778483],
        [34.57121278022428, 135.485876065805],
        [34.571096791944726, 135.48622246952988],
        [34.57100565818576, 135.48641363836393],
        [34.57087119949882, 135.48662276687392],
        [34.570681868003966, 135.48686710448024],
        [34.570370753319544, 135.4871818245368],
        [34.56997287755336, 135.48759506387813],
        [34.568557804534876, 135.48833074543384],
        [34.568479847804994, 135.48836509371986],
        [34.56842935530578, 135.48842809198646],
        [34.56801253662476, 135.48869256246962],
        [34.56793902158923, 135.48872734552552],
        [34.56792088150618, 135.48872966439475],
        [34.567684105322634, 135.48900097209258],
        [34.567584811879584, 135.4889638702145],
        [34.56742250503755, 135.48930010626677],
        [34.56733084927137, 135.48950068845363],
        [34.56698713924153, 135.48997837557613],
        [34.56684106204836, 135.49021490025723],
        [34.56610112461491, 135.49133607359227],
        [34.56562374213265, 135.49179173142178],
        [34.56514856258045, 135.49207375091504],
        [34.562589219252956, 135.49341203393095],
        [34.55747001160738, 135.495031876579],
        [34.5575078385908, 135.49524727806178],
        [34.557428271467764, 135.49544367353135],
        [34.55724565810995, 135.4960708720189],
        [34.55711913290609, 135.49635437838225],
        [34.55670825075424, 135.49797780884046],
        [34.556649553139444, 135.4983230847467],
        [34.55660389940994, 135.49904372950863],
        [34.556521722634564, 135.49938267007713],
        [34.556447372148774, 135.4996329159174],
        [34.55635736884029, 135.50019359330636],
        [34.55629475778193, 135.5006212287078],
        [34.5560450565696, 135.50126954581518],
        [34.555980523746946, 135.50157723483255],
        [34.55642177862972, 135.50191804804095],
        [34.556197426147754, 135.50308278269188],
        [34.555974952540936, 135.5041973075001],
        [34.555919321383, 135.50435696774187],
        [34.55537565128274, 135.50502170705585],
        [34.55531243359367, 135.50508311484887],
        [34.55519358421384, 135.50503705899288],
        [34.554921747240236, 135.50471927370396],
        [34.55465875992035, 135.50503705901903],
        [34.554070828538414, 135.50561275703868],
        [34.55398265679656, 135.50567656120478],
        [34.55367794201544, 135.50586999573966],
        [34.55347184798, 135.50598667054007],
        [34.553211384851224, 135.50609720456612],
        [34.55303139240064, 135.5061369011155],
        [34.55271655899115, 135.50614918267254],
        [34.55252816412495, 135.50624436475394],
        [34.552279077647285, 135.50638406748112],
        [34.55204389885974, 135.50651302384074],
        [34.55179607534013, 135.50662662824632],
        [34.551517905202125, 135.5066465857759],
        [34.551088004069875, 135.50650841825444],
        [34.550666951687, 135.5064961366841],
        [34.55044947033769, 135.5065421925262],
        [34.550190262184444, 135.50670338796263],
        [34.550009448208115, 135.5067110639336],
        [34.54972874322396, 135.50665272653757],
        [34.54775411575552, 135.50892094382328],
        [34.54788970691575, 135.50929922339088],
        [34.54788043131958, 135.50960297770098],
        [34.547838321586966, 135.5098723222453],
        [34.54768939675192, 135.50992594176105],
        [34.547641124506804, 135.5099683385875],
        [34.547422358443036, 135.5101815697345],
        [34.54687390015488, 135.5107576678359],
        [34.54661096755918, 135.51099209737166],
        [34.54620243661582, 135.51163282626922],
        [34.546125405038204, 135.5116964215367],
        [34.54521231874289, 135.51221266527284],
        [34.54480045088969, 135.5126241639193],
        [34.544406041857634, 135.51289475543717],
        [34.54427251754564, 135.51292967047067],
        [34.54380107228992, 135.5132339300439],
        [34.543096467205864, 135.51372398758818],
        [34.54291569293395, 135.51389232792837],
        [34.54224908440353, 135.5144335109752],
        [34.541885477496635, 135.51468539803818],
        [34.54166508954466, 135.51478879766285],
        [34.5413682446614, 135.51502198020816],
        [34.54111464365698, 135.51514551399816],
        [34.541079720553526, 135.51531884220026],
        [34.54108793775567, 135.51571662418937],
        [34.54053841056442, 135.51624409067014],
        [34.540320652992435, 135.51640993708563],
        [34.53972900690199, 135.51669798615364],
        [34.53877407724008, 135.5173692748049],
        [34.53731014391948, 135.51838811313894],
        [34.53605824720396, 135.51926138265307],
        [34.535191243017664, 135.51979677629697],
        [34.53357334292628, 135.52065058700282],
        [34.53236868477957, 135.52151071126974],
        [34.5306809186074, 135.5228933076967],
        [34.530625616302565, 135.52292170836813],
        [34.529908810010674, 135.5234587392911],
        [34.529650557605386, 135.5237130696665],
        [34.52943401455617, 135.5241079713512],
        [34.529374445440894, 135.52421091698898],
        [34.52932047694361, 135.52450504738258],
        [34.528982495947105, 135.52479915723936],
        [34.5281458224401, 135.52547463026042],
        [34.52706200166287, 135.52622494058284],
        [34.52639516549918, 135.5265915931663],
        [34.5257146451307, 135.52691258712954],
        [34.52544448726878, 135.5270218910992],
        [34.52507971575897, 135.52721974513366],
        [34.5247263418377, 135.52733596708916],
        [34.52426581357972, 135.52738300930648],
        [34.523863419225854, 135.52750891642498],
        [34.52306376577662, 135.52776347347486],
        [34.52265224604241, 135.52793088843018],
        [34.52223502451709, 135.52815226358422],
        [34.52105437638606, 135.52878109644453],
        [34.51935691394321, 135.5297464075895],
        [34.518822753508736, 135.5300586487057],
        [34.51830980000825, 135.53034460132832],
        [34.516605317658716, 135.53128415999416],
        [34.51618121117385, 135.5315096540998],
        [34.515662855892366, 135.53181684891157],
      ],

      {
        color: "#002fff",
        weight: 10,
        opacity: 0.7,
      }
    ).addTo(mymap);
  },
};
</script>

<!-- Add "scoped" attribute to limit CSS to this component only -->
<style>
html,
body,
#app,
#mapid {
  height: calc(100vh - 60px);
}
body {
  margin: 0;
}
</style>
